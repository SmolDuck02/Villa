<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Animal Village 3D: MMO Edition</title>
    
    <!-- External Libs -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    
    <!-- CSS -->
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="game-container"></div>
    
    <!-- LOGIN OVERLAY -->
    <div id="login-overlay">
        <div class="login-box">
            <div class="login-title">Join the Village</div>
            <input type="text" id="username-input" class="login-input" placeholder="Enter your name..." maxlength="12">
            
            <div style="text-align:left; margin-bottom:5px; font-weight:bold; color:#666;">Choose Avatar:</div>
            <div class="char-grid" id="char-grid">
                <!-- Populated by JS -->
            </div>
            
            <button class="start-btn" id="start-game-btn">Join World</button>
        </div>
    </div>

    <!-- UI LAYER -->
    <div class="ui-layer" id="ui-layer">
        <div class="hud">
            <div class="hud-left">
                <div class="health-bar" id="health-display">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</div>
                <div class="quest-box">
                    <div class="quest-title">MMO Adventure</div>
                    <div class="quest-text">Explore & Chat!</div>
                </div>
                <button class="sens-btn" id="sens-toggle">Sens: Med</button>
                <div class="stance-indicator" id="stance-display">WALK</div>
            </div>
            
            <div style="display:flex; flex-direction:column; align-items:flex-end;">
                <button class="inventory-btn" id="open-inventory" title="Open Inventory">üéí</button>
                <button class="almanac-btn" id="open-almanac" title="Open Almanac">üìñ</button>
                <div class="online-count" id="online-count"><span class="status-dot" id="status-dot"></span>Online: 1</div>
            </div>
        </div>
        
        <!-- NEW HOTBAR -->
        <div id="hotbar">
            <!-- Slots 1-9 generated by JS -->
        </div>
        
        <!-- CHAT SYSTEM -->
        <div id="chat-history">
            <!-- Messages appear here -->
        </div>
        <div id="chat-container">
            <input type="text" id="chat-input" placeholder="Type a message... (Enter to send)">
        </div>

        <div id="toast">Too far! Get closer.</div>

        <div class="controls-hint">
            WASD Move ‚Ä¢ 1-9 Items ‚Ä¢ SPACE Action ‚Ä¢ I Inventory ‚Ä¢ ENTER Chat
        </div>
    </div>

    <!-- MODALS -->
    <div id="dialogue-overlay">
        <div class="speaker-name" id="speaker-name">Animal Name</div>
        <div class="dialogue-text" id="dialogue-text">...</div>
        <button class="continue-btn" id="close-dialogue">Got it!</button>
    </div>

    <div id="almanac-modal" class="modal">
        <div class="almanac-header">
            <span>Nature Almanac</span>
            <button class="close-btn" id="close-almanac">‚úï</button>
        </div>
        <div class="almanac-body">
            <div class="animal-grid" id="almanac-grid"></div>
            <div class="almanac-details" id="almanac-details">
                <div class="placeholder-text">Select an unlocked animal to view details.</div>
            </div>
        </div>
    </div>

    <div id="inventory-modal" class="modal">
        <div class="modal-header">
            <span>Backpack</span>
            <button class="close-btn" id="close-inventory">‚úï</button>
        </div>
        <div class="modal-body">
            <div class="inv-grid-container" id="inventory-grid"></div>
        </div>
    </div>

    <!-- ENTRY POINT -->
    <script type="module" src="js/main.js"></script>
</body>
</html>